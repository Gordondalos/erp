{% extends '::base.html.twig' %}

{% block body -%}
    <h1>Issue list</h1>

    <table class="records_list">
        <thead>
            <tr>
                <th>Id</th>
                <th>Issuename</th>
                <th>Issuedescription</th>
                <th>Issueautor</th>
                <th>Issueexecutor</th>
                <th>Datecreate</th>
                <th>Datefinish</th>
                <th>Status</th>
                <th>Summa</th>
                <th>Datestart</th>
                <th>Project</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for entity in entities %}
            <tr>
                <td><a href="{{ path('issue_show', { 'id': entity.id }) }}">{{ entity.id }}</a></td>
                <td>{{ entity.issueName }}</td>
                <td>{{ entity.issueDescription }}</td>
                {% for key,user in users %}

                    {% if key == entity.issueAutor %}
                        <td>{{ user }}</td>
                    {% endif %}

                {% endfor %}
                {#<td>{{ entity.issueExecutor }}</td>#}
                {% for key,user in users %}

                    {% if key == entity.issueExecutor %}
                        <td>{{ user }}</td>
                    {% endif %}

                {% endfor %}


                <td>{% if entity.dateCreate %}{{ entity.dateCreate|date('Y-m-d H:i:s') }}{% endif %}</td>
                <td>{% if entity.dateFinish %}{{ entity.dateFinish|date('Y-m-d H:i:s') }}{% endif %}</td>


                {#<td>{{ entity.status }}</td>#}
                {% for key,status in statuses %}

                    {% if key == entity.status %}
                        <td>{{ status }}</td>
                    {% endif %}

                {% endfor %}

                <td>{{ entity.summa }}</td>
                <td>{% if entity.dateStart %}{{ entity.dateStart|date('Y-m-d H:i:s') }}{% endif %}</td>

                {#<td>{{ entity.project }}</td>#}
                {% for key,project in projects %}

                    {% if key == entity.project %}
                        <td>{{ project }}</td>
                    {% endif %}

                {% endfor %}

                <td>
                <ul>
                    <li>
                        <a href="{{ path('issue_show', { 'id': entity.id }) }}">show</a>
                    </li>
                    <li>
                        <a href="{{ path('issue_edit', { 'id': entity.id }) }}">edit</a>
                    </li>
                </ul>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

        <ul>
        <li>
            <a href="{{ path('issue_new') }}">
                Create a new entry
            </a>
        </li>
    </ul>
    {% endblock %}
